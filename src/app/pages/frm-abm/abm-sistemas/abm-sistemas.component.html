<div class="container my-5">
  <div class="card shadow-lg border-0 sistemas-abm-card">
    <!-- CABECERA -->
    <div
      class="card-header bg-primary text-white d-flex justify-content-between align-items-center rounded-top px-4 py-3"
    >
      <h4 class="m-0 fw-semibold">
        <i class="bi bi-diagram-3-fill me-2"></i>
        ABM Sistemas
      </h4>
    </div>

    <hr class="m-0" />

    <!-- FORMULARIO -->
    <div class="card-body bg-light px-4 py-4">
      <form (ngSubmit)="guardar()" #formSistema="ngForm" class="row g-3">
        <!-- NOMBRE SISTEMA -->
        <div class="col-md-6">
          <label class="form-label fw-semibold">Nombre del Sistema</label>
          <input
            type="text"
            class="form-control"
            name="nombreSistema"
            [(ngModel)]="item.nombreSistema"
            required
          />
        </div>

        <!-- AÑO -->
        <div class="col-md-3">
          <label class="form-label fw-semibold">Año de Implementación</label>
          <input
            type="number"
            class="form-control text-center"
            name="anioImplementacion"
            [(ngModel)]="item.anioImplementacion"
            required
          />
        </div>

        <!-- UNIDAD -->
        <div class="col-md-3">
          <label class="form-label fw-semibold">Unidad</label>

          <app-fil-autocompletado-unidad
            (unidadSeleccionada)="unidadSeleccionada($event)"
          ></app-fil-autocompletado-unidad>

          <!-- unidad seleccionada -->
          <small *ngIf="item.nombreUnidad" class="text-muted fst-italic">
            Seleccionada: {{ item.nombreUnidad }}
          </small>
        </div>

        <!-- DISPOSICIÓN -->
        <div class="col-md-6">
          <label class="form-label fw-semibold">Disposición</label>
          <input
            type="text"
            class="form-control"
            name="disposicion"
            [(ngModel)]="item.disposicion"
          />
        </div>

        <!-- FECHA DISPOSICIÓN -->
        <div class="col-md-3">
          <label class="form-label fw-semibold">Fecha Disposición / Fecha Instalación</label>
          <input
            type="date"
            class="form-control"
            name="fechaDisposicion"
            [(ngModel)]="item.fechaDisposicion"
          />
        </div>

        <!-- ESTADO -->
        <div class="col-md-3">
          <label class="form-label fw-semibold">Estado</label>
          <select
            class="form-select"
            name="estado"
            [(ngModel)]="item.estado"
            required
          >
            <option value="en desarrollo">En desarrollo</option>
            <option value="desarrollado">Desarrollado</option>
          </select>
        </div>

        <!-- LINK -->
        <div class="col-md-12">
          <label class="form-label fw-semibold">Link de Acceso</label>
          <input
            type="url"
            class="form-control"
            name="linkAcceso"
            [(ngModel)]="item.linkAcceso"
            placeholder="https://..."
          />
        </div>

        <!-- OBSERVACIONES -->
        <div class="col-md-12">
          <label class="form-label fw-semibold">Observaciones</label>
          <textarea
            class="form-control"
            rows="3"
            name="observaciones"
            [(ngModel)]="item.observaciones"
          ></textarea>
        </div>

        <!-- BOTONES -->
        <div class="col-12 text-end mt-4">
          <button
            type="submit"
            class="btn btn-success me-2 px-4"
            [disabled]="!formSistema.valid"
          >
            <i class="bi bi-save me-2"></i>
            {{ editando ? "Actualizar" : "Guardar" }}
          </button>

          <button type="button" class="btn btn-secondary px-4" (click)="back()">
            <i class="bi bi-x-circle me-2"></i>
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
