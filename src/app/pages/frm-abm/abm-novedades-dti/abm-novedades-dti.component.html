<div class="container my-5">
  <div class="card shadow-lg border-0 sistemas-abm-card">
    <!-- CABECERA -->
    <div
      class="card-header bg-primary text-white d-flex justify-content-between align-items-center rounded-top px-4 py-3"
    >
      <h4 class="m-0 fw-semibold">
        <i class="bi bi-bell-fill me-2"></i>
        ABM Novedades
      </h4>
    </div>

    <hr class="m-0" />

    <!-- FORMULARIO -->
    <div class="card-body bg-light px-4 py-4">
      <form (ngSubmit)="guardar()" #formNovedad="ngForm" class="row g-3">
        <!-- FECHA -->
        <div class="col-md-3">
          <label class="form-label fw-semibold">Fecha</label>
          <input
            type="date"
            class="form-control text-center"
            name="fechaNovedad"
            [(ngModel)]="item.fechaNovedad"
            required
          />
        </div>

        <!-- UNIDAD -->
        <div class="col-md-5">
          <label class="form-label fw-semibold">Unidad</label>

          <app-fil-autocompletado-unidad
            (unidadSeleccionada)="unidadSeleccionada($event)"
          ></app-fil-autocompletado-unidad>

          <small *ngIf="item.nombreUnidad" class="text-muted fst-italic">
            Seleccionada: {{ item.nombreUnidad }}
          </small>
        </div>

        <!-- TIPO NOVEDAD -->
        <div class="col-md-4">
          <label class="form-label fw-semibold">Tipo de Novedad</label>
          <select
            class="form-select"
            name="tipoNovedad"
            [(ngModel)]="item.tipoNovedad"
            required
          >
            <option [ngValue]="null">Seleccione...</option>
            <option *ngFor="let t of tiposNovedad" [ngValue]="t.idTipoNovedad">
              {{ t.nombre }}
            </option>
          </select>
        </div>

        <!-- NOVEDAD -->
        <div class="col-md-12">
          <label class="form-label fw-semibold"
            >Descripci√≥n de la Novedad</label
          >
          <textarea
            class="form-control"
            rows="4"
            name="novedad"
            [(ngModel)]="item.novedad"
            required
          ></textarea>
        </div>

        <!-- BOTONES -->
        <div class="col-12 text-end mt-4">
          <button
            type="submit"
            class="btn btn-success me-2 px-4"
            [disabled]="!formNovedad.valid"
          >
            <i class="bi bi-save me-2"></i>
            {{ editando ? "Actualizar" : "Guardar" }}
          </button>

          <button type="button" class="btn btn-secondary px-4" (click)="back()">
            <i class="bi bi-x-circle me-2"></i>
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
